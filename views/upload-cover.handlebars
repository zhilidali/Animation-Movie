{{!-- 此页面为文件上传示例 --}}
<style>
	.btn-file {position: relative;overflow: hidden;}
	.btn-file input[type=file] {position: absolute;top: 0;right: 0;
		min-width: 100%;min-height: 100%;font-size: 999px;text-align: right;
		opacity: 0;outline: none;background: white;cursor: inherit;display: block;}
</style>
<form class="form-horizontal" role="form" enctype="multipart/form-data" method="POST" action="/upload-cover/{year}/{month}">
	<div class="form-group">
		<label for="fieldName" class="col-sm-2 control-label">名字</label>
		<div class="col-sm-4">
			<input type="text" class="form-control"
			id="fieldName" name="name">
		</div>
	</div>
	<div class="form-group">
		<label for="fieldEmail" class="col-sm-2 control-label">邮箱</label>
		<div class="col-sm-4">
			<input type="email" class="form-control" required
			id="fieldName" name="email">
		</div>
	</div>
	<div class="form-group">
		<label for="fieldPhoto" class="col-sm-2 control-label">封面
		</label>
		<div class="col-sm-4">
			<span class="btn btn-default btn-file">
				上传
				<input type="file" class="form-control" required accept="image/*"
				id="fieldPhoto" data-url="/upload" multiple name="photo">
			</span>
			<div id="fileUploads"></div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-4">
			<button type="submit" class="btn btn-primary">提交</button>
		</div>
	</div>
</form>
{{#section 'jquery'}}
<script src="/vendor/jqplug/jquery.ui.widget.js"></script>
<script src="/vendor/jqplug/jquery.iframe-transport.js"></script>
<script src="/vendor/jqplug/jquery.fileupload.js"></script>
<script>
	$(function(){
		$('#fieldPhoto').fileupload({
			dataType: 'json',
			done: function(e, data){
				$.each(data.result.files, function(index, file){
					$('#fileUploads').append($('<div class="upload">' +
						'<span class="glyphicon glyphicon-ok"></span>' +
						'&nbsp;' + file.originalName + '</div>'));
				});
			}
		});
	});
</script>
{{/section}}
